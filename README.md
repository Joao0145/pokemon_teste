Este projeto é uma aplicação web Full-Stack leve, desenvolvida para demonstrar proficiência em comunicação assíncrona (AJAX), processamento de dados em tempo real e gerenciamento de estado sem um banco de dados tradicional. O sistema atende aos requisitos de dinamismo e persistência de dados.
1. Arquitetura e Fluxo de DadosA aplicação opera em um modelo Client-Server com comunicação assíncrona, garantindo que a interface seja atualizada sem a necessidade de recarregar a página.ComponenteFunção PrimáriaResponsabilidadeindex.phpApresentaçãoEstrutura HTML, uso do Bootstrap (modal) e inclusão de dependências.main.jsInteratividadeGerencia eventos, envia requisições AJAX e atualiza a DataTable.controller.phpBack-end/ProxyComunica-se com a PokeAPI, transforma os dados e gerencia o estado da aplicação via Sessão PHP.Fluxo Assíncrono:O Front-end (main.js) envia uma requisição POST ao controller.php com o tipo de action (load, insert ou delete).O Back-end (controller.php) processa a ação, manipula o estado persistente.O PHP retorna o array de dados completo (JSON) da sessão.O JavaScript recebe o JSON e renderiza o novo estado da interface de forma dinâmica.
2. 2. Back-end: controller.php (PHP)O controller.php é o motor de lógica de negócios, focado em API e persistência de estado.A. Persistência de Dados (Sessão PHP)Gerenciamento de Estado: A função session_start() é utilizada para iniciar a sessão e permitir o armazenamento persistente de dados.Banco de Dados Virtual: O array $_SESSION['pokemon_data'] é o repositório principal de dados. Ele armazena todos os Pokémons inseridos, cumprindo o requisito de evitar a perda de dados ao recarregar a página.Roteamento por Ação: O controller verifica o valor de $_POST['action'] para rotear a execução:action: 'load': Retorna todo o conteúdo atual de $_SESSION['pokemon_data'].action: 'insert': Após buscar na API, anexa o novo Pokémon ao array da sessão.action: 'delete': Utiliza o índice recebido do AJAX para remover o elemento com unset() e, em seguida, array_values() para reindexar o array da sessão, garantindo a exclusão persistente e permanente.B. API Proxy e Transformação de DadosIntegração com API: A comunicação é feita usando @file_get_contents() (método robusto para ambientes XAMPP/Localhost) para buscar dados da PokeAPI. O uso do @ gerencia erros (como 404) de forma silenciosa.Otimização de Dados: O controller otimiza o payload da API:Formatação de Tipos: O array complexo de types da API é iterado e convertido em uma única string limpa (Tipo1, Tipo2), ideal para exibição na tabela.Resposta Simples: Apenas os campos essenciais (id, name, types, photo) são extraídos e retornados no JSON.
   3. 3. Front-end: main.js (JavaScript, jQuery, DataTables)O main.js é responsável por toda a interatividade e a dinâmica da tabela, sem exigir recarga da página.A. Gerenciamento da InterfaceDataTable: O plugin jQuery DataTables é inicializado para organizar os dados em uma tabela com paginação e suporte a idioma Português.Renderização Customizada: As colunas 'Foto' e 'Ação' utilizam a função render do DataTables para injetar elementos HTML dinâmicos (<img> e <button>).B. Lógica Assíncrona e DinamismoCarregamento Inicial: Ao carregar a página ($(document).ready), uma requisição AJAX com action: 'load' é enviada para pré-preencher a tabela com os dados persistentes da sessão.Atualização Unificada: A função refreshTable(data) centraliza a manipulação da DataTables. Ela recebe o array JSON atualizado do PHP, utiliza .clear() e .rows.add(data).draw() para redesenhar a tabela.Exclusão Assíncrona: O evento de clique no botão 'Excluir' dispara uma requisição AJAX action: 'delete', enviando o índice da sessão do Pokémon a ser removido. Após o sucesso, ele aciona o refreshTable para atualizar a lista sem a linha excluída.
